# Active Context: Current Work Focus

## üéØ –¢–µ–∫—É—â–∏–π –°—Ç–∞—Ç—É—Å
**–§–∞–∑–∞**: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞  
**–î–∞—Ç–∞**: –î–µ–∫–∞–±—Ä—å 2025  
**–†–µ–∂–∏–º**: Memory Bank —Å–æ–∑–¥–∞–Ω, –≥–æ—Ç–æ–≤—ã –∫ –Ω–∞—á–∞–ª—É —Ä–∞–±–æ—Ç—ã

## üìç –ì–¥–µ –ú—ã –°–µ–π—á–∞—Å?

### Completed ‚úÖ
1. **Project Setup**
   - –°–æ–∑–¥–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
   - README —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∑–∞–¥–∞—á–∏
   - –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ `data/raw/`
   - Memory Bank –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω

### In Progress ‚öôÔ∏è
1. **Memory Bank Initialization**
   - –°–æ–∑–¥–∞–Ω–∏–µ core –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
   - –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏

### Blocked / Issues ‚ö†Ô∏è
- –ù–µ—Ç —Ç–µ–∫—É—â–∏—Ö –±–ª–æ–∫–µ—Ä–æ–≤

## üîÑ –¢–µ–∫—É—â–∏–µ –†–µ—à–µ–Ω–∏—è –∏ –ö–æ–Ω—Ç–µ–∫—Å—Ç

### Architectural Decisions
**ADR-001: Global vs Local Models**
- **–†–µ—à–µ–Ω–∏–µ**: –ù–∞—á–∏–Ω–∞–µ–º —Å Global Model (–æ–¥–Ω–∞ –º–æ–¥–µ–ª—å –¥–ª—è –≤—Å–µ—Ö store-item –ø–∞—Ä)
- **–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**: –ü—Ä–æ—â–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –ª—É—á—à–µ generalization, store/item –∫–∞–∫ features
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: –ï—Å–ª–∏ SMAPE > 15%, —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å local models –¥–ª—è —Ç–æ–ø-—Ç–æ–≤–∞—Ä–æ–≤
- **–°—Ç–∞—Ç—É—Å**: –ü—Ä–∏–Ω—è—Ç–æ

**ADR-002: Baseline Strategy**
- **–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–≤—ã–π baseline - Moving Average (30 –¥–Ω–µ–π)
- **–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ–π, –ø–æ–Ω—è—Ç–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π
- **–û–∂–∏–¥–∞–Ω–∏—è**: SMAPE ~20-25%
- **–°—Ç–∞—Ç—É—Å**: –ü—Ä–∏–Ω—è—Ç–æ

**ADR-003: Feature Engineering Approach**
- **–†–µ—à–µ–Ω–∏–µ**: –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–∏—á–µ–π (temporal ‚Üí lags ‚Üí rolling ‚Üí advanced)
- **–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ**: –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –ø–æ–Ω–∏–º–∞–Ω–∏–µ –≤–∫–ª–∞–¥–∞ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã —Ñ–∏—á–µ–π
- **–°—Ç–∞—Ç—É—Å**: –ü—Ä–∏–Ω—è—Ç–æ

### Technical Context
- **Environment**: Windows 10, Python 3.x
- **IDE**: Cursor (—Å AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º)
- **VCS**: Git (–ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è)
- **Dependencies**: requirements.txt –ø–æ–∫–∞ –ø—É—Å—Ç, –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω

## üìã Immediate Next Steps (Prioritized)

### Step 1: Environment Setup
- [ ] –°–æ–∑–¥–∞—Ç—å –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç—å `requirements.txt`
- [ ] –°–æ–∑–¥–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (pandas, numpy, scikit-learn)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–º–ø–æ—Ä—Ç—ã

### Step 2: Exploratory Data Analysis (EDA)
- [ ] –°–æ–∑–¥–∞—Ç—å `notebooks/01_eda.ipynb`
- [ ] –ë–∞–∑–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞—Ç–∞—Å–µ—Ç–∞
- [ ] –ê–Ω–∞–ª–∏–∑ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π (sales, store, item)
- [ ] –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
- [ ] –ê–Ω–∞–ª–∏–∑ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç–∏ –∏ —Ç—Ä–µ–Ω–¥–æ–≤
- [ ] –í—ã–≤–æ–¥—ã –∏ insights

### Step 3: Data Preprocessing
- [ ] –°–æ–∑–¥–∞—Ç—å `src/data/load_data.py`
- [ ] –§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ train/test
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- [ ] –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (—Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –∏–Ω–¥–µ–∫—Å—ã)

### Step 4: Feature Engineering (Baseline)
- [ ] –°–æ–∑–¥–∞—Ç—å `src/features/build_features.py`
- [ ] –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∏—á–∏ (year, month, week, dayofweek)
- [ ] –ü—Ä–æ—Å—Ç—ã–µ –ª–∞–≥–∏ (7, 30 –¥–Ω–µ–π)
- [ ] Rolling mean (7, 30 –¥–Ω–µ–π)
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ `data/processed/`

### Step 5: Baseline Model
- [ ] –°–æ–∑–¥–∞—Ç—å `notebooks/03_baseline_models.ipynb`
- [ ] Naive forecast (last year same day)
- [ ] Moving Average (30 days)
- [ ] Simple Linear Regression
- [ ] –†–∞—Å—á–µ—Ç SMAPE –¥–ª—è –∫–∞–∂–¥–æ–≥–æ baseline
- [ ] –í—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ baseline

## ü§î –û—Ç–∫—Ä—ã—Ç—ã–µ –í–æ–ø—Ä–æ—Å—ã

### Question 1: –û–±—Ä–∞–±–æ—Ç–∫–∞ –ù–∞—á–∞–ª—å–Ω—ã—Ö –î–∞—Ç
**–í–æ–ø—Ä–æ—Å**: –ö–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–µ—Ä–≤—ã–µ 365 –¥–Ω–µ–π, –≥–¥–µ –Ω–µ—Ç sales_lag_365?  
**–í–∞—Ä–∏–∞–Ω—Ç—ã**:
- –£–¥–∞–ª–∏—Ç—å —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ (–ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö)
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å –Ω—É–ª—è–º–∏ (–∏—Å–∫–∞–∂–µ–Ω–∏–µ)
- –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Å—Ä–µ–¥–Ω–∏–º –ø–æ store-item (–∫–æ–º–ø—Ä–æ–º–∏—Å—Å)
**–°—Ç–∞—Ç—É—Å**: –¢—Ä–µ–±—É–µ—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≤ EDA

### Question 2: –ü—Ä–∞–∑–¥–Ω–∏–∫–∏ –∏ –ê–Ω–æ–º–∞–ª–∏–∏
**–í–æ–ø—Ä–æ—Å**: –ï—Å—Ç—å –ª–∏ –≤ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ –∏–ª–∏ —Å–µ–∑–æ–Ω–Ω—ã–µ –∞–Ω–æ–º–∞–ª–∏–∏?  
**–î–µ–π—Å—Ç–≤–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ EDA –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤  
**–°—Ç–∞—Ç—É—Å**: –û—Ç–∫—Ä—ã—Ç–æ

### Question 3: Store/Item Encoding
**–í–æ–ø—Ä–æ—Å**: –ö–∞–∫ –ª—É—á—à–µ –∑–∞–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å store –∏ item?  
**–í–∞—Ä–∏–∞–Ω—Ç—ã**:
- One-Hot Encoding (–¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –º–æ–¥–µ–ª–µ–π)
- Label Encoding (–¥–ª—è tree-based models)
- Target Encoding (—Ä–∏—Å–∫–æ–≤–∞–Ω–Ω–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å overfitting)
**–°—Ç–∞—Ç—É—Å**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—ã–±—Ä–∞–Ω–Ω–æ–π –º–æ–¥–µ–ª–∏

## üí° –ò–¥–µ–∏ –¥–ª—è –ë—É–¥—É—â–∏—Ö –ò—Ç–µ—Ä–∞—Ü–∏–π

### Iteration 2 Ideas
- XGBoost / LightGBM —Å hyperparameter tuning
- –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ lag features (exponential weighted)
- Feature interactions (store √ó item, month √ó item)
- Ensemble –ø—Ä–æ—Å—Ç—ã—Ö –º–æ–¥–µ–ª–µ–π

### Iteration 3 Ideas
- Deep Learning: LSTM/GRU –¥–ª—è –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
- Hierarchical forecasting (forecast –ø–æ store, –ø–æ—Ç–æ–º split –ø–æ items)
- External features (–µ—Å–ª–∏ –Ω–∞–π–¥—É—Ç—Å—è open data –æ –ø—Ä–∞–∑–¥–Ω–∏–∫–∞—Ö)

### Production Ideas
- FastAPI –¥–ª—è serving predictions
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- Monitoring dashboard
- A/B testing framework

## üéì Lessons Learned (–±—É–¥–µ—Ç –ø–æ–ø–æ–ª–Ω—è—Ç—å—Å—è)

*–ü–æ–∫–∞ –Ω–µ—Ç —É—Ä–æ–∫–æ–≤ - –ø—Ä–æ–µ–∫—Ç —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª—Å—è*

## üìä Key Metrics to Track

### Offline Metrics
- **SMAPE**: primary metric
- **MAE**: –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º–∞—è –º–µ—Ç—Ä–∏–∫–∞
- **RMSE**: –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –±–æ–ª—å—à–∏—Ö –æ—à–∏–±–æ–∫

### Validation Strategy
- **Train**: 2013-2016 (4 –≥–æ–¥–∞)
- **Validation**: 2017 (1 –≥–æ–¥)
- **Test**: 2018 (–º–µ—Å—Ç–Ω—ã–π —Ç–µ—Å—Ç + Kaggle public leaderboard)

### Target Performance
- **Baseline**: SMAPE ~20-25%
- **Iteration 1**: SMAPE ~15-18%
- **Iteration 2**: SMAPE < 15%
- **Stretch Goal**: SMAPE < 13% (top-tier)

## üîó Related Documents
- [Project Brief](./projectbrief.md) - –æ—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ –∏ —Ü–µ–ª–∏
- [System Patterns](./systemPatterns.md) - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è
- [Tech Context](./techContext.md) - —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
- [Progress](./progress.md) - –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

